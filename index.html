<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebKit - The Ultimate Tools Collection</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root {
            --bg-dark: #111827; /* Tailwind gray-900 */
            --bg-light: #1F2937; /* Tailwind gray-800 */
            --accent-cyan: #22d3ee;
            --accent-cyan-dark: #0891b2;
            --text-light: #d1d5db;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-light) 100%);
            color: var(--text-light);
            overflow-x: hidden;
        }

        /* --- Animations --- */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up { animation: fadeInUp 0.6s ease-out forwards; }

        /* --- Professional Look & Feel --- */
        .header-glow { text-shadow: 0 0 15px rgba(34, 211, 238, 0.5); }
        .tool-card {
            background: rgba(31, 41, 55, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .tool-card:hover:not(.disabled) {
            transform: translateY(-8px);
            border-color: rgba(34, 211, 238, 0.6);
            box-shadow: 0 10px 25px -5px rgba(34, 211, 238, 0.2), 0 0 15px rgba(34, 211, 238, 0.1);
        }
        .tool-card.disabled {
            cursor: not-allowed;
            filter: grayscale(80%);
            opacity: 0.7;
        }
        .category-tag {
            background: linear-gradient(to right, var(--accent-cyan-dark), var(--accent-cyan));
            color: var(--bg-dark);
            font-weight: 500;
        }

        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 24px;
            border-radius: 2px;
            background: linear-gradient(to bottom, var(--accent-cyan), var(--accent-cyan-dark));
        }
        
        /* --- Tool Viewer (Iframe Container) --- */
        #tool-viewer {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: var(--bg-dark);
            z-index: 100;
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        #tool-viewer.active { transform: translateY(0); }
        #tool-iframe {
            width: 100%;
            height: calc(100% - 60px); /* Adjust for header */
            border: none;
        }

        /* --- Modals --- */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: rgba(0, 0, 0, 0.7);
            backdrop-filter: blur(5px);
            z-index: 110;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease-in-out;
        }
        .modal-overlay:not(.hidden) {
            opacity: 1;
            pointer-events: auto;
        }
        .modal-content {
            background-color: var(--bg-light);
            padding: 2rem;
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            max-width: 90%;
            width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }
    </style>
</head>
<body class="min-h-screen">

    <!-- Hub Container -->
    <div id="hub-container">
        <!-- Sidebar and Overlay -->
        <div id="sidebar-overlay" class="hidden fixed inset-0 bg-black bg-opacity-60 z-40 transition-opacity"></div>
        <nav id="sidebar-menu" class="fixed top-0 left-0 h-full w-64 bg-gray-800 p-6 z-50 transform -translate-x-full transition-transform">
            <h2 class="text-2xl font-bold text-white mb-6 header-glow">Categories</h2>
            <ul id="category-list" class="space-y-2"></ul>
        </nav>
        
        <!-- Main Content Container -->
        <div id="mainContent">
            <header class="py-6 px-4 text-center">
                <h1 class="text-5xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-gray-200 to-cyan-300 header-glow">
                    Web Kit
                </h1>
                <p class="mt-2 text-cyan-200 text-lg">The Ultimate Tools Collection</p>
                
                <div class="max-w-xl mx-auto mt-8 flex items-center justify-center gap-3">
                    <div class="flex-grow max-w-lg bg-gray-900/50 backdrop-blur-sm rounded-full px-4 py-2.5 shadow-lg border border-gray-700 focus-within:border-cyan-400 transition-colors">
                        <input type="text" id="search-input" placeholder="Search for tools..." class="w-full bg-transparent border-none focus:outline-none text-white placeholder-gray-400" autocomplete="off">
                    </div>
                    <button id="menu-toggle-btn" class="p-3 rounded-full bg-gray-800/80 border border-gray-700">
                        <svg class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m4 6h16" /></svg>
                    </button>
                </div>
            </header>

            <main class="container mx-auto px-4 py-8">
                <section id="new-section" class="mb-12"><h2 class="text-2xl font-bold text-white section-title relative pl-4 mb-6">New Tools</h2><div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5" id="new-tools"></div></section>
                <section id="popular-section" class="my-12"><h2 class="text-2xl font-bold text-white section-title relative pl-4 mb-6">Popular Tools</h2><div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5" id="popular-tools"></div></section>
                <section id="coming-soon-section" class="my-12"><h2 class="text-2xl font-bold text-white section-title relative pl-4 mb-6">Coming Soon</h2><div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-5" id="coming-soon-tools"></div></section>
            </main>

            <footer class="py-6 border-t border-gray-800 mt-12">
                 <div class="container mx-auto px-4 text-center text-gray-400 text-sm">
                    <div id="footer-links" class="flex justify-center gap-4 mb-4">
                        <a href="#" class="hover:text-cyan-300" data-page="terms">Terms</a>
                        <a href="#" class="hover:text-cyan-300" data-page="privacy">Privacy</a>
                        <a href="#" class="hover:text-cyan-300" data-page="contact">Contact</a>
                    </div>
                    <p>Â© 2025 WebKit. All rights reserved.</p>
                </div>
            </footer>
        </div>
    </div>

    <!-- Tool Viewer (Iframe Layer) -->
    <div id="tool-viewer">
        <header class="h-[60px] bg-gray-800 flex items-center justify-between px-4 border-b border-gray-700">
            <h2 id="tool-title" class="text-xl font-bold text-white truncate">Tool Title</h2>
            <button id="back-to-hub-btn" class="bg-cyan-600 hover:bg-cyan-700 text-white font-bold py-2 px-4 rounded-lg transition-colors">Back to Hub</button>
        </header>
        <iframe id="tool-iframe" title="Tool Content"></iframe>
    </div>

    <!-- Modals -->
    <div id="maintenance-modal" class="modal-overlay hidden">
        <div class="modal-content text-center"><h2 class="text-3xl font-bold text-cyan-300 mb-4">Under Maintenance</h2><p id="maintenance-message" class="text-lg">We'll be back shortly.</p></div>
    </div>
    <div id="page-modal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h2 id="page-modal-title" class="text-2xl font-bold text-cyan-300"></h2>
                <button id="page-modal-close" class="text-2xl text-gray-400 hover:text-white">&times;</button>
            </div>
            <div id="page-modal-content" class="text-gray-300 prose prose-invert max-w-none"></div>
        </div>
    </div>

    <script>
    // --- Firebase Configuration ---
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAYA7KkyMjuspnNjaxBAiWUUtCb_bJDuhQ",
  authDomain: "testing-4-e92b8.firebaseapp.com",
  databaseURL: "https://testing-4-e92b8-default-rtdb.firebaseio.com",
  projectId: "testing-4-e92b8",
  storageBucket: "testing-4-e92b8.firebasestorage.app",
  messagingSenderId: "786753674701",
  appId: "1:786753674701:web:746c0bad857eec0b2df884",
  measurementId: "G-CGWL05MEDT"
};
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // --- DOM Elements & State ---
    const hubContainer = document.getElementById('hub-container');
    const toolViewer = document.getElementById('tool-viewer');
    const toolIframe = document.getElementById('tool-iframe');
    const toolTitle = document.getElementById('tool-title');
    const backToHubBtn = document.getElementById('back-to-hub-btn');
    const searchInput = document.getElementById('search-input');
    
    // Modals
    const maintenanceModal = document.getElementById('maintenance-modal');
    const maintenanceMessage = document.getElementById('maintenance-message');
    const pageModal = document.getElementById('page-modal');
    const pageModalTitle = document.getElementById('page-modal-title');
    const pageModalContent = document.getElementById('page-modal-content');
    const pageModalClose = document.getElementById('page-modal-close');

    let allTools = [];
    let currentCategoryFilter = 'All Tools';
    
    // --- Categories ---
    const categories = [
        { name: 'All Tools', icon: 'ð' }, { name: 'Finance Tools', icon: 'ð°' },
        { name: 'PDF Tools', icon: 'ð' }, { name: 'Image Tools', icon: 'ð¼ï¸' },
        { name: 'Converters', icon: 'ð' }, { name: 'Generators', icon: 'ð§' }
    ];

    // --- Core Functions ---
    const renderTools = (tools, containerId) => {
        const container = document.getElementById(containerId);
        container.innerHTML = "";
        if (!tools.length) {
            container.innerHTML = `<p class="col-span-full text-center text-gray-400">No tools found.</p>`;
            return;
        }
        tools.forEach(tool => {
            const isDisabled = tool.isComingSoon || !tool.firebaseId;
            const card = document.createElement('div');
            card.className = `tool-card rounded-xl overflow-hidden ${isDisabled ? 'disabled' : ''}`;
            card.innerHTML = `
                <div class="relative pt-[100%] bg-gray-700">
                    <img src="${tool.imageURL || 'https://via.placeholder.com/300'}" alt="${tool.title}" class="absolute top-0 left-0 w-full h-full object-cover">
                </div>
                <div class="p-3">
                    <h3 class="font-medium truncate">${tool.title}</h3>
                    <span class="inline-block mt-1 px-2 py-1 text-xs rounded-full category-tag">${tool.category}</span>
                </div>`;
            if (!isDisabled) card.addEventListener('click', () => loadToolInViewer(tool));
            container.appendChild(card);
        });
    };

    const filterAndRenderAllSections = () => {
        const searchTerm = searchInput.value.toLowerCase();
        const filteredTools = allTools.filter(tool => 
            (currentCategoryFilter === 'All Tools' || tool.category === currentCategoryFilter) &&
            tool.title.toLowerCase().includes(searchTerm)
        );

        renderTools(filteredTools.filter(t => t.isNew && !t.isComingSoon), 'new-tools');
        renderTools(filteredTools.filter(t => t.isPopular && !t.isComingSoon), 'popular-tools');
        renderTools(filteredTools.filter(t => t.isComingSoon), 'coming-soon-tools');
    };

    const loadToolInViewer = (tool) => {
        database.ref('tools/' + tool.firebaseId).once('value')
            .then(snapshot => {
                const toolData = snapshot.val();
                if (toolData && toolData.htmlCode) {
                    toolTitle.textContent = tool.title;
                    toolIframe.srcdoc = toolData.htmlCode;
                    toolViewer.classList.add('active');
                    hubContainer.style.display = 'none';
                } else {
                    alert(`Error: The tool "${tool.title}" could not be loaded.`);
                }
            }).catch(error => alert("Failed to load tool content."));
    };

    const hideToolViewer = () => {
        toolViewer.classList.remove('active');
        hubContainer.style.display = 'block';
        toolIframe.srcdoc = ''; 
    };

    // --- Firebase Data Fetching ---
    const fetchToolsFromFirebase = () => {
        database.ref('tools').on('value', snapshot => {
            const data = snapshot.val();
            allTools = data ? Object.keys(data).map(key => ({ firebaseId: key, ...data[key] })) : [];
            filterAndRenderAllSections();
        }, error => alert("Could not connect to the database."));
    };

    const checkMaintenanceStatus = () => {
        database.ref('maintenance').once('value', snapshot => {
            const data = snapshot.val();
            if (data && data.isActive) {
                maintenanceMessage.textContent = data.message || "We'll be back shortly.";
                maintenanceModal.classList.remove('hidden');
            }
        });
    };
    
    // --- Page/Modal Handling ---
    const showPageModal = (pageKey) => {
        database.ref('pages/' + pageKey).once('value', snapshot => {
            const data = snapshot.val();
            // BUG FIX: Ensure data and its properties exist before showing the modal
            if (data && data.title && data.content) {
                pageModalTitle.textContent = data.title;
                pageModalContent.innerHTML = data.content; 
                pageModal.classList.remove('hidden');
            } else {
                alert(`The content for "${pageKey}" could not be found or is empty.`);
            }
        });
    };
    
    // --- Sidebar and Category Logic ---
    const sidebarMenu = document.getElementById('sidebar-menu');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    const menuToggleBtn = document.getElementById('menu-toggle-btn');
    const categoryList = document.getElementById('category-list');
    
    const toggleMenu = () => {
        sidebarMenu.classList.toggle('-translate-x-full');
        sidebarOverlay.classList.toggle('hidden');
    }
    
    const renderCategories = () => {
        categoryList.innerHTML = categories.map(cat => `
            <li>
                <a class="flex items-center p-2 rounded-lg cursor-pointer hover:bg-gray-700" data-category="${cat.name}">
                    <span class="mr-3 text-xl">${cat.icon}</span>
                    <span>${cat.name}</span>
                </a>
            </li>
        `).join('');
        // Set 'All Tools' as active by default
        categoryList.querySelector('a').classList.add('bg-gray-700');
    };

    // --- Event Listeners ---
    searchInput.addEventListener('input', filterAndRenderAllSections);
    backToHubBtn.addEventListener('click', hideToolViewer);
    menuToggleBtn.addEventListener('click', toggleMenu);
    sidebarOverlay.addEventListener('click', toggleMenu);

    categoryList.addEventListener('click', e => {
        const link = e.target.closest('a');
        if (link && link.dataset.category) {
            // Update active state
            categoryList.querySelector('a.bg-gray-700')?.classList.remove('bg-gray-700');
            link.classList.add('bg-gray-700');
            
            currentCategoryFilter = link.dataset.category;
            filterAndRenderAllSections();
            if (window.innerWidth < 768) toggleMenu();
        }
    });

    document.getElementById('footer-links').addEventListener('click', e => {
        e.preventDefault();
        if (e.target.dataset.page) showPageModal(e.target.dataset.page);
    });

    pageModalClose.addEventListener('click', () => pageModal.classList.add('hidden'));

    // --- Initial Load ---
    document.addEventListener('DOMContentLoaded', () => {
        renderCategories();
        checkMaintenanceStatus();
        fetchToolsFromFirebase();
    });
    </script>
</body>
</html>
