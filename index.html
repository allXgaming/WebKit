<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WebKit - The Ultimate Tools Collection</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <style>
        :root {
            --bg-dark: #111827; /* Tailwind gray-900 */
            --bg-light: #1F2937; /* Tailwind gray-800 */
            --accent-cyan: #22d3ee;
            --accent-cyan-dark: #0891b2;
            --text-light: #d1d5db;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--bg-dark) 0%, var(--bg-light) 100%);
            color: var(--text-light);
            overflow-x: hidden;
        }

        /* --- Animations --- */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in-up {
            opacity: 0;
            animation: fadeInUp 0.6s ease-out forwards;
        }

        /* --- Professional Look & Feel --- */
        .header-glow { text-shadow: 0 0 15px rgba(34, 211, 238, 0.5); }
        .tool-card {
            background: rgba(31, 41, 55, 0.6);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
        }
        .tool-card:hover:not(.disabled) {
            transform: translateY(-6px);
            border-color: rgba(34, 211, 238, 0.6);
            box-shadow: 0 10px 25px -5px rgba(34, 211, 238, 0.2), 0 0 15px rgba(34, 211, 238, 0.1);
        }
        .tool-card.disabled {
            cursor: not-allowed;
            filter: grayscale(80%);
            opacity: 0.7;
        }
        .category-tag {
            background: linear-gradient(to right, var(--accent-cyan-dark), var(--accent-cyan));
            color: var(--bg-dark);
            font-weight: 500;
        }

        .section-title::before {
            content: '';
            position: absolute;
            left: 0;
            top: 50%;
            transform: translateY(-50%);
            width: 4px;
            height: 24px;
            border-radius: 2px;
            background: linear-gradient(to bottom, var(--accent-cyan), var(--accent-cyan-dark));
        }
        .section-divider {
            background: linear-gradient(90deg, transparent, rgba(34, 211, 238, 0.3), transparent);
        }
        
        /* --- Sidebar & Menu Button --- */
        #sidebar-menu {
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            z-index: 50;
        }
        #sidebar-menu.active { transform: translateX(0); }
        .sidebar-link:hover { background-color: rgba(34, 211, 238, 0.1); }
        .sidebar-link.active {
            background-color: rgba(34, 211, 238, 0.2);
            color: #22d3ee;
        }
        .sidebar-text { text-shadow: 0 0 8px rgba(34, 211, 238, 0.4); }

        #menu-toggle-btn {
            background: rgba(31, 41, 55, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.2s ease;
        }
        #menu-toggle-btn:hover {
            background-color: var(--accent-cyan-dark);
            border-color: var(--accent-cyan);
        }
        
        /* Utility styles */
        .grid-section { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 1.25rem; }
        .section-title { position: relative; padding-left: 1rem; margin-bottom: 1.5rem; }
        #sidebar-overlay { position: fixed; inset: 0; background-color: rgba(0, 0, 0, 0.6); z-index: 40; transition: opacity 0.3s ease-in-out; }
        #sidebar-menu { position: fixed; top: 0; left: 0; width: 280px; height: 100%; padding: 1.5rem; border-right: 1px solid rgba(34, 211, 238, 0.2); background: var(--bg-light); }
        .sidebar-link { display: flex; align-items: center; padding: 0.75rem 0.5rem; border-radius: 8px; font-size: 1.1rem; font-weight: 500; cursor: pointer; transition: background-color 0.2s ease, color 0.2s ease; }
        .sidebar-icon { font-size: 1.5rem; margin-right: 1rem; width: 30px; text-align: center; }

    </style>
</head>
<body class="min-h-screen">

    <!-- Sidebar and Overlay -->
    <div id="sidebar-overlay" class="hidden opacity-0"></div>
    <nav id="sidebar-menu">
        <h2 class="text-2xl font-bold text-white mb-6 pl-2 header-glow">Categories</h2>
        <ul id="category-list" class="space-y-2"></ul>
    </nav>
    
    <!-- Main Content Container -->
    <div id="mainContent">
        <header class="py-6 px-4 text-center">
            <h1 class="text-5xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-gray-200 to-cyan-300 header-glow">
                Web Kit
            </h1>
            <p class="mt-2 text-cyan-200 text-lg">The Ultimate Tools Collection</p>
            
            <div class="max-w-xl mx-auto mt-8 flex items-center justify-center gap-3">
                <div class="flex-grow max-w-lg bg-gray-900/50 backdrop-blur-sm rounded-full px-4 py-2.5 shadow-lg border border-gray-700 focus-within:border-cyan-400 transition-colors">
                    <div class="flex items-center">
                        <input type="text" id="search-input" placeholder="Search tools..." class="w-full bg-transparent border-none focus:outline-none text-white placeholder-gray-400" autocomplete="off">
                        <button id="search-btn" class="ml-2 text-gray-400 hover:text-cyan-300">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" /></svg>
                        </button>
                    </div>
                </div>
                <button id="menu-toggle-btn" class="p-3 rounded-full">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </header>

        <main class="container mx-auto px-4 py-8">
            <section id="new-section" class="mb-12 fade-in-up">
                <h2 class="text-2xl font-bold text-white section-title">New Tools</h2>
                <div class="grid-section" id="new-tools"></div>
            </section>
            
            <div class="section-divider fade-in-up" style="animation-delay: 0.2s;"></div>
            
            <section id="popular-section" class="my-12 fade-in-up" style="animation-delay: 0.3s;">
                <h2 class="text-2xl font-bold text-white section-title">Popular Tools</h2>
                <div class="grid-section" id="popular-tools"></div>
            </section>
            
            <div class="section-divider fade-in-up" style="animation-delay: 0.5s;"></div>
            
            <section id="coming-soon-section" class="my-12 fade-in-up" style="animation-delay: 0.6s;">
                <h2 class="text-2xl font-bold text-white section-title">Coming Soon</h2>
                <div class="grid-section" id="coming-soon-tools"></div>
            </section>
        </main>

        <footer class="py-6 border-t border-gray-800 mt-12">
             <div class="container mx-auto px-4 text-center text-gray-500 text-sm">
                <p>© 2025 WebKit. All rights reserved.</p>
            </div>
        </footer>
    </div>

    <script>
    // --- Firebase Configuration (Placeholder) ---
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyAYA7KkyMjuspnNjaxBAiWUUtCb_bJDuhQ",
  authDomain: "testing-4-e92b8.firebaseapp.com",
  databaseURL: "https://testing-4-e92b8-default-rtdb.firebaseio.com",
  projectId: "testing-4-e92b8",
  storageBucket: "testing-4-e92b8.firebasestorage.app",
  messagingSenderId: "786753674701",
  appId: "1:786753674701:web:746c0bad857eec0b2df884",
  measurementId: "G-CGWL05MEDT"
};
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();

    // --- DOM Elements & State ---
    const searchInput = document.getElementById('search-input');
    const searchBtn = document.getElementById('search-btn');
    const menuToggleBtn = document.getElementById('menu-toggle-btn');
    const sidebarMenu = document.getElementById('sidebar-menu');
    const sidebarOverlay = document.getElementById('sidebar-overlay');
    const categoryList = document.getElementById('category-list');
    let currentCategoryFilter = 'All Tools';
    let allTools = []; // To store tools fetched from Firebase

    // --- Data ---
    const categories = [
        { name: 'All Tools', icon: '🌟' },
        { name: 'Finance Tools', icon: '💰' },
        { name: 'PDF Tools', icon: '📄' },
        { name: 'Image Tools', icon: '🖼️' },
        { name: 'Converters', icon: '🔄' },
        { name: 'Generators', icon: '🔧' },
        { name: 'Utilities', icon: '🧰' }
    ];

    // --- Functions ---
    const toggleMenu = () => {
        const isActive = sidebarMenu.classList.contains('active');
        if (isActive) {
            sidebarMenu.classList.remove('active');
            sidebarOverlay.classList.add('opacity-0');
            setTimeout(() => sidebarOverlay.classList.add('hidden'), 300);
        } else {
            sidebarMenu.classList.add('active');
            sidebarOverlay.classList.remove('hidden');
            setTimeout(() => sidebarOverlay.classList.remove('opacity-0'), 10);
        }
    };

    const renderSidebarCategories = () => {
        categoryList.innerHTML = categories.map(category => `
            <li>
                <a class="sidebar-link" data-category="${category.name}">
                    <span class="sidebar-icon">${category.icon}</span>
                    <span class="sidebar-text">${category.name}</span>
                </a>
            </li>
        `).join('');
        document.querySelector('.sidebar-link[data-category="All Tools"]').classList.add('active');
    };

    const renderTools = (toolsToRender, containerId) => {
        const container = document.getElementById(containerId);
        container.innerHTML = "";
        if (toolsToRender.length === 0) {
            container.innerHTML = `<div class="col-span-full text-center p-8 text-gray-400">No tools found for this criteria.</div>`;
            return;
        }
        toolsToRender.forEach(tool => {
            const toolCard = document.createElement('div');
            const isToolDisabled = tool.isComingSoon || !tool.firebaseId;
            
            toolCard.className = `tool-card rounded-xl overflow-hidden ${isToolDisabled ? 'disabled' : ''}`;
            if (isToolDisabled) {
                toolCard.setAttribute('title', 'Coming Soon...');
            }

            toolCard.innerHTML = `
                <div class="relative pt-[100%]">
                    <img src="${tool.imageURL || 'https://images.unsplash.com/photo-1543286386-2e6593068625?q=80&w=2070&auto=format&fit=crop'}" alt="${tool.title}" class="absolute top-0 left-0 w-full h-full object-cover">
                </div>
                <div class="p-3">
                    <h3 class="font-medium truncate">${tool.title}</h3>
                    <span class="inline-block mt-1 px-2 py-1 text-xs rounded-full category-tag">
                        ${tool.category}
                    </span>
                </div>`;

            if (!isToolDisabled) {
                toolCard.addEventListener('click', () => {
                    const toolRef = database.ref('tools/' + tool.firebaseId);
                    toolRef.once('value')
                        .then((snapshot) => {
                            const toolData = snapshot.val();
                            if (toolData && toolData.htmlCode) {
                                // Open a new tab and render the HTML code
                                const newTab = window.open();
                                newTab.document.open();
                                newTab.document.write(toolData.htmlCode);
                                newTab.document.close();
                            } else {
                                alert(`The tool "${tool.title}" is currently unavailable or has no content.`);
                                console.warn(`htmlCode not found in Firebase for toolId: ${tool.firebaseId}`);
                            }
                        })
                        .catch((error) => {
                            console.error("Error fetching tool data from Firebase: ", error);
                            alert("Failed to load tool data. Please check your connection and try again.");
                        });
                });
            }
            container.appendChild(toolCard);
        });
    };
    
    const filterAndRenderAllSections = () => {
        const searchTerm = searchInput.value.toLowerCase();
        const filteredTools = allTools.filter(tool => {
            const categoryMatch = currentCategoryFilter === 'All Tools' || tool.category === currentCategoryFilter;
            const searchMatch = tool.title.toLowerCase().includes(searchTerm);
            return categoryMatch && searchMatch;
        });

        renderTools(filteredTools.filter(t => t.isNew && !t.isComingSoon), 'new-tools');
        renderTools(filteredTools.filter(t => t.isPopular && !t.isComingSoon), 'popular-tools');
        renderTools(filteredTools.filter(t => t.isComingSoon), 'coming-soon-tools');
    };
    
    const fetchToolsFromFirebase = () => {
        const toolsRef = database.ref('tools');
        toolsRef.on('value', (snapshot) => {
            const data = snapshot.val();
            if (data) {
                allTools = Object.keys(data).map(key => ({
                    firebaseId: key,
                    ...data[key]
                }));
            } else {
                allTools = [];
            }
            filterAndRenderAllSections(); // Re-render after fetching
        }, (error) => {
            console.error("Firebase Read Failed: " + error.code);
            alert("Could not fetch tools from the database.");
        });
    };

    // --- Event Listeners ---
    menuToggleBtn.addEventListener('click', toggleMenu);
    sidebarOverlay.addEventListener('click', toggleMenu);
    
    searchInput.addEventListener('input', filterAndRenderAllSections);
    searchBtn.addEventListener('click', filterAndRenderAllSections);
    searchInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') filterAndRenderAllSections(); });

    categoryList.addEventListener('click', (e) => {
        const link = e.target.closest('.sidebar-link');
        if (link) {
            document.querySelector('.sidebar-link.active')?.classList.remove('active');
            link.classList.add('active');
            
            currentCategoryFilter = link.dataset.category;
            filterAndRenderAllSections();
            if (window.innerWidth < 768) { // Close sidebar on mobile after selection
                toggleMenu();
            }
        }
    });
    
    // --- Initial Load ---
    window.onload = () => {
        renderSidebarCategories();
        fetchToolsFromFirebase();
    };
    </script>
</body>
</html>
